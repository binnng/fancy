(function(t,n){var i,e,o,s,c,l,f,r,a;i=window.$||window.Zepto;s=i("body");c=i("html");e="click";r="in-m-fancy";a=false;f=function(t){var n;if(t==null){t=[]}n=t.sort(function(t,n){return n-t});return n[0]};o=function(){var t,n,e,o,l,u,h,m,d,b;u="<div class='m-mask'></div>";l=["<div class='m-fancy'>","{title}","{content}","{btns}","<em class=x-fancy>close</em>","</div>"];n=function(t,n){if(n==null){n=50}t.show();return setTimeout(function(){return t.css("opacity",1)},n)};t=function(t,n){if(n==null){n=50}t.css("opacity",0);return setTimeout(function(){return t.hide()},n)};e=null;h={init:function(t){e=i(u);return e.appendTo(s)},show:function(t){if(t==null){t=50}return n(e,t)},hide:function(n){if(n==null){n=50}return t(e,n)}};function p(){}function v(t){this.config=t!=null?t:{};this.content=this.config.content||"";this.name=this.config.name||"";this.title=this.config.title||"";this.btns=this.config.btns||this.config.buttons||[];this.time=this.config.time||50;this.elFancy=null;this.width=t.width}v.prototype.init=function(){var t,n,e,o;t=this.config;if(!a){h.init(t)}a=true;var c=this;var f=function(){var t=l.join("");var n="";var i="";var e=c.btns.length;if(c.title){n="<h3>"+c.title+"</h3>"}if(e){if(e==1){i="<div class=m-btn-row><b class='m-btn m-left-btn m-btn-full'>"+c.btns[0]+"</b></div>"}else{i=["<div class=m-btn-row>","<b class='m-btn m-left-btn m-btn-half'>"+c.btns[0]+"</b>","<b class='m-btn m-right-btn m-btn-half'>"+c.btns[1]+"</b>","</div>"].join("")}}return t.replace("{title}",n).replace("{content}",c.content.indexOf("<")==0?c.content:"<p>"+c.content+"</p>").replace("{btns}",i)}();this.elFancy=e=i(f);if(t.noX){e.addClass("no-x")}if(this.name){e.attr("name",this.name);e.addClass("name-"+this.name)}if(!this.config.onlyMask){e.appendTo(s)}this.elClose=i("em",e);this.leftBtn=i(".m-left-btn",e);this.rightBtn=i(".m-right-btn",e);r();function r(){c.elClose.click(function(){c.hide();(c.config.fns[2]||p).call(c)});c.leftBtn.click(function(){(c.config.fns[0]||p).call(c)});c.rightBtn.click(function(){(c.config.fns[1]||p).call(c)})}return this};v.prototype.show=function(){var t;var i=f([window.innerHeight,c[0].offsetHeight,s[0].offsetHeight]);e[0].style.height=i+"px";t=this.elFancy;h.show(this.time);n(t,this.time);c.addClass(r);window.screenTop=0;return this};v.prototype.hide=function(){var n;n=this.elFancy;h.hide(this.time);t(n);c.removeClass(r);return this};v.prototype.remove=function(){this.hide().elFancy.remove()};return v}();l=function(t){return new o(t).init()};l.mask=function(){return new o({onlyMask:true}).init().show()};l.confirm=function(t){t.noX=true;return l(t)};if(typeof module!="undefined"&&module.exports){module.exports=l}else{window.Fancy=l}})(window,document);